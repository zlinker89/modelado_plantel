<!DOCTYPE html>
<html>
<head>
    <title>Bienvenido al Plantel</title>
    <!--Import materialize.css-->
    <link href="../Content/materialize/css/materialize.min.css" rel="stylesheet" media="screen,projection" type="text/css" />
    <link href="../Content/materialize/css/iconos.css" rel="stylesheet" />
    <!--Mis estilos CSS-->
    <link href="../Content/estilos.css" rel="stylesheet" />
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style type="text/css">
        .links a {
            color: black;
            transition: background 0.4s;
        }

        #listado {
            opacity: 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row">
            <nav>
                <div class="nav-wrapper">
                    <a href="#!" class="brand-logo">Logo</a>
                    <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
                    <ul class="right hide-on-med-and-down">
                        <li><a href="admin.html">Inicio</a></li>
                        <li><a href="badges.html">Components</a></li>
                        <li><a href="collapsible.html">Javascript</a></li>
                        <li><a href="#" class="cerrar"><span class="usuario"></span> -- Cerrar Sesión </a></li>
                    </ul>
                    <ul class="side-nav" id="mobile-demo">
                        <li><a href="sass.html">Sass</a></li>
                        <li><a href="badges.html">Components</a></li>
                        <li><a href="collapsible.html">Javascript</a></li>
                        <li><a href="#" class="cerrar"><a href="#" class="cerrar">Cerrar Sesión</a><span class="usuario"></span></a></li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="row">
            <div class="col s1 links"><a href="admin.html" class="tooltipped" data-delay="50" data-tooltip="Volver"><i class="small material-icons">skip_previous</i></a></div>
        </div>
        <div class="row">
                    <div class="panel"><i class="material-icons">search</i>Buscar por documento</div>
                    <div class="panel-body">
                        <div class="col s12">
                            <form class="s12 form-inline" data-bind="submit: consultaEstudiante">
                                <div class="row col s12">
                                    <div class="input-field col row s12">
                                        <div class="col row s12 m3 l12">
                                            <input id="numero" type="text" class="validate" required>
                                            <label for="numero">Documento:</label>
                                        </div>
                                        <div class="col row s12 m4">
                                            <button type="submit" class="btn btn-primary waves-light waves-effect">Consultar</button>
                                        </div>
                                    </div>
                                 </div>
                            </form>

                            <!--ko if:detail_modificar()-->
                            <form class="s12" data-bind="submit: addMatricula">

                                <div class="col row s12 l8">
                                    <div class="col s12">
                                        <div class="row col s12">
                                            <div class="input-field col s12 m6">
                                                <input id="nnombres" type="text" class="validate" data-bind="value:detail_modificar().nombres" readonly required>
                                                <label for="nnombres" class="active">Nombres:</label>
                                            </div>
                                            <div class="input-field col s12 m6">
                                                <input id="napellidos" type="text" class="validate" data-bind="value:detail_modificar().apellidos" readonly required>
                                                <label for="napellidos" class="active">Apellidos:</label>
                                            </div>
                                        </div>
                                        <div class="row col s12">
                                            <div class="input-field col s12">
                                                <input id="id" type="hidden" class="validate" data-bind="value:detail_modificar().Id" required>
                                                <input id="uid" type="hidden" class="validate" data-bind="value:detail_modificar().UsuarioId" required>
                                            </div>
                                        </div>
                                        <br class="hide-on-large-only" />
                                        <div class="row col s12">
                                            <h5>Asignaturas:</h5>
                                            <!-- ko foreach: profesorasignatura -->
                                            <input type="checkbox" data-bind="checkedValue: $data ,attr: {'id': Id}, checked: $root.chosenItems" />
                                            <label data-bind="attr: {'for': Id}">
                                                <span data-bind="text:nombreAsignatura"></span> --
                                                <span data-bind="text:nombreProfesor"></span>
                                                <span data-bind="text:apellidoProfesor"></span>
                                            </label>
                                            <br />
                                            <!-- /ko -->

                                        </div>
                                    </div>
                                </div>
                                <div class="col row s12 l4">
                                    <br class="hide-on-large-only" />
                                    <div class="input-field col s12" style="z-index:3;">
                                        <br class=" hide-on-large-only" />
                                        <select style="height:220px" class="" data-bind="options: cursos, optionsText:'nombre_curso', value: new_matricula.Curso"></select>
                                        <label>Cursos:</label>
                                    </div>
                                    <div class="input-field col s12" style="z-index:2;">
                                        <select data-bind="options: jornadas, optionsText:'nombre_jornada', value: new_matricula.Jornada"></select>
                                        <label>Jornada:</label>
                                    </div>
                                </div>

                                <div class="row col s12 center">
                                    <button type="submit" class="btn btn-default waves-effect waves-light">Crear Matricula</button>
                                </div>
                            </form>

                            <!--/ko-->
                            <div id="progreso" class="s12 center">
                                <div class="preloader-wrapper big active">
                                    <div class="spinner-layer spinner-blue">
                                        <div class="circle-clipper left">
                                            <div class="circle"></div>
                                        </div><div class="gap-patch">
                                            <div class="circle"></div>
                                        </div><div class="circle-clipper right">
                                            <div class="circle"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </div>
                        </div>
            <!--ko if:detail_modificar()-->
            <div class="col row s12">
                <hr />
                <h5>Matriculas realizadas:</h5>
                <table class="responsive-table">
                    <thead>
                        <tr>
                            <th>Profesor</th>
                            <th>Asignatura</th>
                            <th>Curso</th>
                            <th>Opciones</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: matriculas">
                        <tr>
                            <td>
                                <span data-bind="text: nombreProfesor"></span> <span data-bind="text: apellidoProfesor"></span>
                            </td>
                            <td>
                                <span data-bind="text: asignatura"></span>
                            </td>
                            <td>
                                <span data-bind="text: curso"></span>
                            </td>
                            <td>
                                <a href="#!" data-bind="click: $parent.deleteMatricula"><i class="material-icons">delete</i></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>   
            <!--/ko-->  
        </div>
    </div>

    <!--Import jQuery before materialize.js-->
    <script src="../Scripts/jquery-2.1.4.min.js"></script>
    <script src="../Scripts/knockout-3.3.0.js"></script>
    <script src="../Scripts/materialize/materialize.min.js"></script>
    <!--Mis Scripts-->
    <script src="../Scripts/indexMatricula.js"></script>
    <script src="../Scripts/verificar_usuario.js"></script>
</body>
</html>

<script type="text/javascript">
    $(document).ready(inicio);

    function inicio() {
        $("#btnmostrar").click(function () {
            document.getElementById("listado").style.opacity = 1;
            Materialize.showStaggeredList('#listado');
        });
        var options = [{ selector: '#listado', offset: 50, callback: 'Materialize.showStaggeredList("#listado")' }];
        Materialize.scrollFire(options);
        $('.datepicker').pickadate({
            selectMonths: true, // Creates a dropdown to control month
            selectYears: 15 // Creates a dropdown of 15 years to control year
        });
        $('#progreso').hide();
        $('.tooltipped').tooltip({ delay: 50 });
        $('.modal-trigger').leanModal();
        $(".button-collapse").sideNav();
        $(".cerrar").click(logout);
        $(".button-collapse").sideNav();
        $(".cerrar").click(logout);
    }


    // esta funcion cierra la sesion, limpando el localstorage y retorna al index
    function fecha() {
        $('.datepicker').pickadate({
            selectMonths: true, // Creates a dropdown to control month
            selectYears: 15 // Creates a dropdown of 15 years to control year
        });
    }
    function logout() {
        localStorage.clear();
        location.href = "index.html";
    }
    function modal() {
        $('#modal1').openModal();
    }
</script>
