<!DOCTYPE html>
<html>
<head>
    <title>Bienvenido al Plantel</title>
    <!--Import materialize.css-->
    <link href="../Content/materialize/css/materialize.min.css" rel="stylesheet" media="screen,projection" type="text/css" />
    <link href="../Content/materialize/css/iconos.css" rel="stylesheet" />
    <!--Mis estilos CSS-->
    <link href="../Content/estilos.css" rel="stylesheet" />
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style type="text/css">
        .links a {
            color: black;
            transition: background 0.4s;
        }

        #listado {
            opacity: 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row">
            <nav>
                <div class="nav-wrapper">
                    <a href="#!" class="brand-logo">Logo</a>
                    <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
                    <ul class="right hide-on-med-and-down">
                        <li><a href="admin.html">Inicio</a></li>
                        <li><a href="badges.html">Components</a></li>
                        <li><a href="collapsible.html">Javascript</a></li>
                        <li><a href="#" class="cerrar"><span class="usuario"></span> -- Cerrar Sesión </a></li>
                    </ul>
                    <ul class="side-nav" id="mobile-demo">
                        <li><a href="sass.html">Sass</a></li>
                        <li><a href="badges.html">Components</a></li>
                        <li><a href="collapsible.html">Javascript</a></li>
                        <li><a href="#" class="cerrar"><a href="#" class="cerrar">Cerrar Sesión</a><span class="usuario"></span></a></li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="row">
            <div class="col s1 links"><a href="admin.html" class="tooltipped" data-delay="50" data-tooltip="Volver"><i class="small material-icons">skip_previous</i></a></div>
        </div>
        <div class="row">
            <ul class="collapsible" data-collapsible="accordion">
                <li>
                    <div class="collapsible-header"><i class="material-icons">add</i>Crear Profesor</div>
                    <div class="collapsible-body">
                        <div class="row">
                            <div class="col s12">
                                <form class="s12" data-bind="submit: addProfesor">
                                    <div class="row col s12">
                                        <div class="input-field col s6">
                                            <input id="nombres" type="text" class="validate" required>
                                            <label for="nombres">Nombres:</label>
                                        </div>
                                        <div class="input-field col s6">
                                            <input id="apellidos" type="text" class="validate" required>
                                            <label for="apellidos">Apellidos:</label>
                                        </div>
                                    </div>
                                    <div class="row col s12 l3">
                                        <div class="input-field col s12" style="z-index:2;">
                                            <select id="tdocumento">
                                                <option value="CC">CC</option>
                                                <option value="TI">TI</option>
                                                <option value="CE">CE</option>
                                            </select>
                                            <label>Tipo de documento:</label>
                                        </div>
                                    </div>
                                    <div class="row col s12 l9">
                                        <div class="input-field col s12">
                                            <input id="documento" type="text" class="validate" required>
                                            <label for="documento">Documento:</label>
                                        </div>
                                    </div>
                                    <div class="row col s12">
                                        <div class="input-field col s12">
                                            <input id="direccion" type="text" class="validate" required>
                                            <label for="direccion">Direccion:</label>
                                        </div>
                                    </div>
                                    <div class="row col s12">
                                        <div class="input-field col s12">
                                            <input id="telefono" type="text" class="validate" required>
                                            <label for="telefono">Telefono:</label>
                                        </div>
                                    </div>
                                    <div class="row col s12 l6">
                                        <div class="input-field col s12">
                                            <input id="contrasena" type="password" class="validate" required>
                                            <label for="contrasena">Contraseña:</label>
                                        </div>
                                    </div>
                                    <div class="row col s12 l6">
                                        <div class="input-field col s12">
                                            <input id="contrasena2" type="password" class="validate" required>
                                            <label for="contrasena2">Repita la contraseña:</label>
                                        </div>
                                    </div>
                                    <div class="row col s12 center">
                                        <button type="submit" class="btn btn-default">Añadir</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="collapsible-header"><i class="material-icons">search</i>Buscar por documento</div>
                    <div class="collapsible-body">
                        <div class="col s12">
                            <form class="s12 form-inline" data-bind="submit: consultaProfesor">
                                <div class="row col s12">
                                    <div class="input-field col row s12">
                                        <input id="numero" type="text" class="validate" required>
                                        <label for="numero">Documento:</label>
                                        <button type="submit" class="btn btn-primary waves-light waves-effect">Consultar</button>
                                        <!--ko if:detail_modificar()-->
                                        <button type="button" class="btn btn-danger waves-light waves-effect" data-bind="click: borrarProfesor">Eliminar</button>
                                        <!--/ko-->
                                    </div>
                                    <div id="progreso" class="s12 center">
                                        <div class="preloader-wrapper big active">
                                            <div class="spinner-layer spinner-blue">
                                                <div class="circle-clipper left">
                                                    <div class="circle"></div>
                                                </div><div class="gap-patch">
                                                    <div class="circle"></div>
                                                </div><div class="circle-clipper right">
                                                    <div class="circle"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- ko if:detail_modificar() -->
                        <div class="col s12">
                            <form class="s12" data-bind="submit: updateProfesor">
                                <div class="row col s12">
                                    <div class="input-field col s6">
                                        <input id="nnombres" type="text" class="validate" data-bind="value:detail_modificar().nombres" required>
                                        <label for="nnombres">Nombres:</label>
                                    </div>
                                    <div class="input-field col s6">
                                        <input id="napellidos" type="text" class="validate" data-bind="value:detail_modificar().apellidos" required>
                                        <label for="napellidos">Apellidos:</label>
                                    </div>
                                </div>
                                <div class="row col s12 l9">
                                    <div class="input-field col s5">
                                        <input id="ntdocumento" type="text" class="validate" data-bind="value:detail_modificar().tdocumento" readonly>
                                        <label for="ntdocumento">Tipo de Documento:</label>
                                    </div>
                                    <div class="input-field col s7">
                                        <input id="ndocumento" type="text" class="validate" data-bind="value:detail_modificar().ndocumento" readonly>
                                        <label for="ndocumento">Documento:</label>
                                    </div>
                                </div>
                                <div class="row col s12">
                                    <div class="input-field col s12">
                                        <input id="ndireccion" type="text" class="validate" data-bind="value:detail_modificar().direccion" required>
                                        <label for="ndireccion">Direccion:</label>
                                    </div>
                                </div>
                                <div class="row col s12">
                                    <div class="input-field col s12">
                                        <input id="ntelefono" type="text" class="validate" data-bind="value:detail_modificar().telefono" required>
                                        <label for="ntelefono">Telefono:</label>
                                    </div>
                                </div>
                                <div class="row col s12">
                                    <div class="input-field col s12">
                                        <input id="id" type="hidden" class="validate" data-bind="value:detail_modificar().Id" required>
                                        <input id="uid" type="hidden" class="validate" data-bind="value:detail_modificar().UsuarioId" required>
                                    </div>
                                </div>
                                <div class="row col s12 center">
                                    <button type="submit" class="btn btn-default">Modificar</button>
                                </div>
                            </form>
                        </div>
                        <!-- /ko -->
                    </div>
                </li>
                <li>
                    <div class="collapsible-header"><i class="material-icons">list</i>Listar todo</div>
                    <div class="collapsible-body">
                        <div class="row col s12">
                            <a href="#" class="btn waves-effect waves-light" id="btnmostrar">Listar Profesores</a>
                        </div>
                        <div class="row col s12">
                            <ul class="collection with-header" id="listado" data-bind="foreach: profesores">
                                <li class="collection-item">
                                    <div>
                                        <span data-bind="text: nombres"></span> <span class="hide-on-small-only" data-bind="text: apellidos"></span>
                                        <a class="secondary-content modal-trigger" href="#modal1" onclick="modal();" data-bind="click: $parent.detalleProfesor"><i class="material-icons">info_outline</i></a>
                                        <a href="#modal1" class="secondary-content" data-bind="click: $parent.deleteProfesor"><i class="material-icons">delete</i></a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <!-- Modal Structure -->
                        <div id="modal1" class="modal bottom-sheet">
                            <div class="modal-content">
                                <h5><span data-bind="text:detail().nombres">content</span> <span data-bind="text:detail().apellidos">content</span></h5>
                                <h6><span data-bind="text: detail().ndocumento"></span><span data-bind="text: detail().tdocumento"></span></h6>
                                <h6 data-bind="text: detail().direccion"></h6>
                                <h6 data-bind="text: detail().telefono"></h6>

                            </div>
                            <div class="modal-footer">
                                <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Cerrar</a>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <!--Import jQuery before materialize.js-->
    <script src="../Scripts/jquery-2.1.4.min.js"></script>
    <script src="../Scripts/knockout-3.3.0.js"></script>
    <script src="../Scripts/materialize/materialize.min.js"></script>
    <!--Mis Scripts-->
    <script src="../Scripts/index.js"></script>
    <script src="../Scripts/verificar_usuario.js"></script>
</body>
</html>

<script type="text/javascript">
    $(document).ready(inicio);

    function inicio() {
        $("#btnmostrar").click(function () {
            document.getElementById("listado").style.opacity = 1;
            Materialize.showStaggeredList('#listado');
        });
        var options = [{ selector: '#listado', offset: 50, callback: 'Materialize.showStaggeredList("#listado")' }];
        Materialize.scrollFire(options);
        $('#progreso').hide();
        $('.tooltipped').tooltip({ delay: 50 });
        $('.modal-trigger').leanModal();
        $('select').material_select();
        $(".button-collapse").sideNav();
        $(".cerrar").click(logout);
        $(".button-collapse").sideNav();
        $(".cerrar").click(logout);
    }


    // esta funcion cierra la sesion, limpando el localstorage y retorna al index
    function logout() {
        localStorage.clear();
        location.href = "index.html";
    }
    function modal() {
        $('#modal1').openModal();
    }
</script>